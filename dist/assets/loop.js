import{r as t,h as f,j as s,S as h,N as S,P as x,a as k,b as j,c as m}from"./index.js";const _="_swiperLoop_1063q_5",L="_dark_1063q_21",P="_swiperSlide_1063q_29",c={swiperLoop:_,dark:L,swiperSlide:P};function b({images:o}){const i=t.useRef(null),[w,n]=t.useState(!1);t.useEffect(()=>{const e=()=>n(window.parent.document.body.classList.contains("dark"));e();const r=new MutationObserver(e);return r.observe(window.parent.document.body,{attributes:!0,attributeFilter:["class"]}),()=>r.disconnect()},[]),t.useEffect(()=>{const e=r=>{if(j.includes(r.origin)){const{action:p,scene:a}=r.data;if(p==="changeSlide"&&!isNaN(a)){const u=i.current.swiper,l=o[a-1];l&&window.parent.postMessage({url:l.url,title:l.title,explanation:l.explanation,source:"loop"},"*"),a>0&&a<=18&&i.current?u.slideToLoop(a-1):u.slideToLoop(0)}}};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)},[o]);const d=(e,r,p,a,u)=>{const l=e+1;console.log("Slide clicked, real index:",l),i.current.swiper&&i.current.swiper.slideToLoop(e),window.parent.postMessage({index:l,url:r,title:p,explanation:a,source:"loop"},"*")};return t.useEffect(()=>{f()},[o]),s.jsx("div",{className:`${c.swiperLoopContainer} ${w?c.dark:""}`,children:s.jsx(h,{grabCursor:!0,loop:o.length>7,initialSlide:0,centeredSlides:!0,slidesPerView:8,slidesPerGroup:1,spaceBetween:10,breakpoints:{1200:{slidesPerView:8},1024:{slidesPerView:7},800:{slidesPerView:6},650:{slidesPerView:5},550:{slidesPerView:4},425:{slidesPerView:3},320:{slidesPerView:2}},modules:[S,x],navigation:!0,pagination:{clickable:!0},className:c.swiperLoop,ref:i,children:o.map((e,r)=>s.jsx(k,{className:c.swiperSlide,onClick:()=>d(r,e.url,e.title,e.explanation,e.media_type),children:s.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",children:[e.media_type==="video"?s.jsx("iframe",{src:e.url,title:e.title,allowFullScreen:!0}):s.jsx("img",{src:e.url,alt:e.title||"Slide Image"}),s.jsx("p",{children:e.title})]})},r))})})}function g(){const[o,i]=t.useState([]);return t.useEffect(()=>{(async()=>{try{const n=await fetch("https://api.nasa.gov/planetary/apod?api_key=DEMO_KEY&hd=True&count=18");if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const d=await n.json();i(d)}catch(n){console.error("Failed to fetch images: "+n)}})()},[]),s.jsx("div",{children:s.jsx(b,{images:o})})}m(document.getElementById("root")).render(s.jsx(t.StrictMode,{children:s.jsx(g,{})}));
